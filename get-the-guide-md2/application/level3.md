## 애플리케이션 아키텍처 수준: Level 3.마이크로서비스(Microservice)

### 전환 원칙
- **마이크로서비스 아키텍처**: 애플리케이션의 대부분 또는 전체가 서로 독립적으로 운영될 수 있는 작은 서비스들로 구성됩니다.
- **서비스 간 느슨한 결합**: 각 마이크로서비스는 독립적으로 개발되고 배포될 수 있으며, 서비스 간에는 API를 통해 통신합니다.
- **확장성 및 유연성**: 마이크로서비스 아키텍처는 높은 수준의 확장성과 유연성을 제공합니다. 서비스를 독립적으로 확장하거나 업데이트할 수 있습니다.

### 전환 절차
#### 전환 평가(Assess)
- 현재 애플리케이션의 구조와 기능을 분석하여 마이크로서비스로 분리할 수 있는 후보를 식별합니다.
- 각 서비스의 독립성, 기능, 데이터 요구 사항을 평가합니다.
- 비즈니스 목표와 기술적 요구 사항을 바탕으로 마이크로서비스 아키텍처로의 전환에 대한 전략을 수립합니다.

> **요약 :** 전환 평가 단계에서는 현재 시스템의 마이크로서비스 전환 가능성을 평가하고, 전환에 대한 전략적 방향성을 설정합니다.

#### 마이그레이션 준비
- 선택한 클라우드 인프라와 기술 스택에 맞는 개발 환경을 구축합니다.
- 마이크로서비스 개발에 필요한 도구 및 플랫폼(예: 컨테이너 오케스트레이션, API 게이트웨이)을 선정합니다.
- 개발, 운영 팀 내에서 마이크로서비스 아키텍처를 지원하기 위한 역량 강화와 교육 프로그램을 실시합니다.

> **요약 :** 마이그레이션 준비 단계에서는 기술적, 조직적 준비를 통해 마이크로서비스 개발과 운영을 위한 기반을 마련합니다.

#### 전환 계획(Plan) 수립
- 전환할 마이크로서비스의 우선 순위를 정하고, 각 서비스별 전환 일정과 리소스 배분을 계획합니다.
- 리스크 관리 및 비상 대응 전략을 포함한 상세한 프로젝트 계획을 작성합니다.
- 이해관계자와의 협업을 통해 프로젝트 범위와 목표를 명확히 합니다.

> **요약 :** 전환 계획 단계에서는 마이크로서비스 전환 프로젝트의 구체적인 실행 계획을 수립합니다.

#### 전환 설계(Design)
- 분리될 각 마이크로서비스의 기능, 데이터 모델, API 설계를 수행합니다. 이 과정에서 서비스별로 필요한 데이터베이스, 외부 API, 그리고 내부 서비스 간 통신 방법을 정의합니다.
- 서비스 간의 통신을 위한 API 게이트웨이 구성과, 서비스 디스커버리 메커니즘을 설계합니다.
- 각 마이크로서비스의 보안 요구 사항을 평가하고, 인증 및 권한 부여, 데이터 암호화 등 보안 전략을 수립합니다.
- 컨테이너화 전략을 결정하고, 컨테이너 오케스트레이션 플랫폼(예: Kubernetes)을 사용한 배포 및 관리 방법을 설계합니다.

> **요약 :** 전환 설계 단계에서는 각 마이크로서비스의 세부적인 기능 및 데이터 모델을 설계하고, 시스템 전반의 보안, 통신, 배포 전략을 수립합니다. 이 단계는 마이크로서비스 아키텍처의 토대를 마련하며, 확장성과 유연성을 보장하는 설계 원칙에 초점을 맞춥니다.

#### 마이그레이션(Migration)
- 개발된 마이크로서비스를 순차적 또는 병렬로 클라우드 환경에 배포합니다. 이 과정에서 지속적인 통합(CI) 및 지속적인 배포(CD) 파이프라인을 활용하여 배포 프로세스를 자동화합니다.
- 데이터 마이그레이션 전략에 따라 기존 데이터를 새로운 서비스의 데이터베이스 스키마에 맞게 이전하고, 필요한 데이터 변환 작업을 수행합니다.
- 초기 마이그레이션 후에는 광범위한 테스트(단위 테스트, 통합 테스트, 부하 테스트)를 실시하여 시스템의 안정성과 성능을 검증합니다.

> **요약 :** 마이그레이션 단계에서는 설계된 마이크로서비스를 클라우드 환경에 배포하고, 데이터를 안전하게 이전합니다. 이 단계는 시스템의 안정적인 작동을 보장하기 위한 철저한 테스트와 검증 과정을 포함합니다.

#### 전환 후 운영 최적화(Operate Optimize)
- 운영 환경에서의 모니터링 및 로깅 시스템을 구축하여, 실시간으로 시스템의 상태를 감시하고 문제를 신속하게 진단할 수 있도록 합니다. 이를 위해 클라우드 네이티브 모니터링 도구(예: Prometheus, Grafana)를 활용합니다.
- 마이크로서비스 아키텍처의 유연성을 최대한 활용하여, 서비스 별로 독립적인 스케일링 전략을 적용합니다. 이를 위해 자동 스케일링 기능(예: Kubernetes HPA)과 트래픽 분석을 기반으로 리소스를 동적으로 조정합니다.
- 클라우드 서비스 비용을 최적화하기 위해, 사용중인 리소스의 비용 효율성을 정기적으로 분석하고, 불필요한 리소스를 정리하거나 비용 효율적인 서비스 옵션으로 전환합니다. 이 과정에서 비용 관리 플랫폼(예: CloudHealth)을 사용할 수 있습니다.
- 보안 정책과 절차를 주기적으로 검토하고 업데이트하여, 데이터 보호 및 시스템 접근 관리를 강화합니다. 또한, 보안 취약점 스캔 및 침입 탐지 시스템을 구현하여 보안 위협에 대응합니다.
- 지속적 통합(CI) 및 지속적 배포(CD) 파이프라인을 최적화하여, 새로운 기능의 빠른 출시와 버그 수정을 지원합니다. 이를 통해 비즈니스 요구 사항에 더욱 민첩하게 대응할 수 있습니다.

> **요약 :** 전환 후 운영 최적화 단계에서는 시스템의 안정성을 유지하고 비용 효율성을 개선하기 위한 다양한 조치를 취합니다. 모니터링 및 로깅, 자동 스케일링, 비용 최적화, 보안 강화, 그리고 CI/CD 파이프라인의 최적화가 핵심 활동입니다. 이 단계는 시스템을 지속적으로 개선하고, 비즈니스 목표 달성을 지원하기 위한 노력을 포함합니다.

### References : 
- 이벤트스토밍, 서비스 디컴포지션 (Service Decomposition) - https://www.msaschool.io/operation/design/design-three/
- 이벤트스토밍 HowTo - https://intro-kor.msaez.io/business/
- 애플리케이션 아키텍처 설계 - https://www.msaschool.io/operation/design/design-five/    
- 프론트-엔드 설계 - https://www.msaschool.io/operation/design/design-eight/      
- 게이트웨이(Gateway)를 통한 애플리케이션 창구 단일화 - https://www.msaschool.io/operation/implementation/implementation-six/
- 이벤트기반 메시지 채널, 카프카(Kafka) 활용 - https://www.msaschool.io/operation/implementation/implementation-seven/
- MSA 성숙도 모델에 따른 구현 관점별 적용 레벨 - https://www.msaschool.io/operation/planning/planning/
