## 애플리케이션 아키텍처 수준: Level 4.도메인 드리븐 & 이벤트 드리븐(Event driven)

### 전환 원칙
- **이벤트 기반 아키텍처**: 마이크로서비스 간의 상호작용이 이벤트를 통해 비동기적으로 이루어집니다. 이를 통해 시스템의 결합도를 낮추고 확장성과 유연성을 향상시킵니다.
- **도메인 중심 설계**: 각 마이크로서비스는 특정 비즈니스 도메인을 중심으로 설계되며, 도메인 모델을 통해 비즈니스 로직을 명확히 표현합니다.
- **서비스 오케스트레이션**: 마이크로서비스들 간의 복잡한 상호작용을 관리하기 위해 고급 오케스트레이션 도구나 기법을 사용합니다. 이는 서비스 간의 워크플로우를 정의하고 실행하는 데 도움을 줍니다.

### 전환 절차
#### 전환 평가(Assess)
- 현재 시스템 아키텍처와 비즈니스 프로세스를 분석하여, 도메인 드리븐 및 이벤트 드리븐 아키텍처로 전환할 후보 영역을 식별합니다.
- 기존 시스템에서 발견된 문제점 및 개선 가능성을 평가하고, 전환으로 인한 잠재적 이점을 도출합니다.

> **요약 :** 전환 평가 단계에서는 현재 시스템을 분석하고, 도메인 드리븐 및 이벤트 드리븐 전환의 타당성을 평가합니다.

#### 마이그레이션 준비
- 전환에 필요한 기술 스택, 도구, 그리고 인프라를 선택합니다. 이벤트 브로커(예: Apache Kafka, RabbitMQ)와 같은 이벤트 스트리밍 플랫폼의 선택이 포함될 수 있습니다.
- 팀원들에게 도메인 드리븐 디자인(DDD) 및 이벤트 기반 시스템 개발에 필요한 교육을 제공합니다.

> **요약 :** 마이그레이션 준비 단계에서는 전환을 위한 기술적, 조직적 기반을 마련합니다.

#### 전환 계획(Plan) 수립
- 전환의 범위, 목표, 일정을 명확히 정의하고, 도메인 및 이벤트 중심의 설계를 통해 달성하고자 하는 비즈니스 및 기술적 목표를 설정합니다.
- 리스크 관리 계획을 수립하여 예상되는 문제점을 미리 식별하고, 대응 전략을 마련합니다. 이 과정에서 기술적, 조직적, 운영적 리스크를 고려합니다.
- 전환을 위한 리소스 배분 계획을 세우며, 필요한 인력, 기술, 도구, 그리고 예산을 할당합니다.
- 이해관계자와의 커뮤니케이션 계획을 마련하여, 프로젝트의 진행 상황을 정기적으로 공유하고, 피드백을 수집합니다.

> **요약 :** 전환 계획 단계에서는 프로젝트의 성공적인 수행을 위한 구체적인 실행 계획을 수립합니다. 이 단계는 전환의 범위, 목표, 리스크 관리, 리소스 배분, 그리고 이해관계자와의 커뮤니케이션 전략을 포함합니다.

#### 전환 설계(Design)
- 도메인 중심 설계 원칙에 따라 각 마이크로서비스의 책임과 경계를 정의하며, 이벤트 기반 통신을 위한 모델을 설계합니다.
- 서비스 간의 통신, 데이터 관리, 그리고 이벤트 처리 방식에 대한 상세 설계를 수행합니다. 이 과정에서 이벤트 스트리밍 플랫폼과 오케스트레이션 도구의 선택이 중요한 역할을 합니다.
- 시스템의 전반적인 보안 아키텍처를 설계하며, 각 서비스의 보안 요구 사항을 충족시키는 방법을 결정합니다.

> **요약 :** 전환 설계 단계에서는 도메인 중심 및 이벤트 기반 아키텍처의 세부 설계를 완성합니다. 이 단계는 마이크로서비스 간의 느슨한 결합과 시스템의 확장성, 유연성, 보안성을 보장하는 설계 원칙에 초점을 맞춥니다.

#### 마이그레이션(Migration)
- 설계 단계에서 결정된 아키텍처를 기반으로 각 마이크로서비스의 개발과 통합을 시작합니다. 이 과정에서, 도메인 중심 설계와 이벤트 기반 통신 메커니즘을 구현합니다.
- 이벤트 스트리밍 플랫폼(예: Kafka, RabbitMQ)을 활용하여 마이크로서비스 간 이벤트 기반 통신을 활성화하고, 서비스 오케스트레이션 도구(예: Kubernetes, Docker Swarm)로 마이크로서비스들의 배포 및 관리를 자동화합니다.
- 데이터 마이그레이션은 특히 주의 깊게 진행해야 합니다. 기존 시스템에서 새로운 마이크로서비스 아키텍처로의 데이터 이전 과정에서 데이터 일관성과 정확성을 보장하기 위한 전략을 실행합니다.
- 전환 과정에서의 안정성을 확보하기 위해, 통합 테스트, 부하 테스트, 그리고 보안 테스트 등 다양한 테스트를 실시합니다. 이를 통해 시스템의 안정적인 운영과 성능, 그리고 보안 취약점을 사전에 파악하고 개선합니다.

> **요약 :** 마이그레이션 단계에서는 실제로 마이크로서비스 개발 및 배포가 이루어지며, 이벤트 기반 통신과 서비스 오케스트레이션을 구현합니다. 데이터 마이그레이션과 다양한 테스트를 통해 전환의 안정성과 성능을 보장합니다.

#### 전환 후 운영 최적화(Operate Optimize)
- 시스템이 새로운 마이크로서비스 및 이벤트 드리븐 아키텍처로 전환된 후, 운영 최적화 과정을 통해 지속적인 개선을 추구합니다. 이 과정에서 중요한 몇 가지 활동을 포함합니다.
- **모니터링 및 로깅**: 실시간 모니터링 도구와 로깅 시스템을 활용하여 시스템의 성능, 가용성, 그리고 보안 상태를 지속적으로 모니터링합니다. 이를 통해 문제를 신속하게 진단하고 대응할 수 있습니다.
- **자동 스케일링 및 리소스 최적화**: 클라우드 인프라의 자동 스케일링 기능을 활용하여 트래픽 변동에 따라 자동으로 리소스를 조정합니다. 리소스 사용량을 주기적으로 분석하여 비용 효율성을 높이는 방향으로 최적화합니다.
- **지속적인 배포와 인프라스트럭처 자동화**: CI/CD 파이프라인을 활용하여 새로운 기능의 배포와 시스템 업데이트를 자동화합니다. 인프라스트럭처 코드화를 통해 인프라 관리를 자동화하고, 운영 효율성을 개선합니다.
- **보안 강화 및 규정 준수**: 보안 정책을 주기적으로 검토하고 업데이트하여, 시스템의 보안을 강화합니다. 또한, 필요한 규정 준수 요구 사항을 충족시키기 위한 조치를 취합니다.

> **요약 :** 전환 후 운영 최적화 단계에서는 모니터링 및 로깅, 자동 스케일링 및 리소스 최적화, 지속적인 배포와 인프라스트럭처 자동화, 그리고 보안 강화 및 규정 준수를 통해 시스템의 안정성, 성능, 그리고 보안을 지속적으로 관리하고 개선합니다. 이 단계는 새로운 아키텍처로의 전환 이후에도 시스템이 비즈니스 목표와 사용자의 요구를 충족시키도록 지원합니다.

### References:
- <a href="https://www.msaschool.io/operation/design/design-three/" target="_blank">이벤트스토밍, 서비스 디컴포지션 (Service Decomposition)</a>
- <a href="https://intro-kor.msaez.io/business/" target="_blank">이벤트스토밍 HowTo</a>
- <a href="https://www.msaschool.io/operation/design/design-five/" target="_blank">애플리케이션 아키텍처 설계</a>
- <a href="https://www.msaschool.io/operation/design/design-eight/" target="_blank">프론트-엔드 설계</a>
- <a href="https://www.msaschool.io/operation/implementation/implementation-six/" target="_blank">게이트웨이(Gateway)를 통한 애플리케이션 창구 단일화</a>
- <a href="https://www.msaschool.io/operation/implementation/implementation-seven/" target="_blank">이벤트기반 메시지 채널, 카프카(Kafka) 활용</a>
- <a href="https://www.msaschool.io/operation/planning/planning/" target="_blank">MSA 성숙도 모델에 따른 구현 관점별 적용 레벨</a>